<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>BAC_Stage_is_not_editable</fullName>
    <active>true</active>
    <description>This Validation prevent users from changingthe Opportunity Stage to Initial Bid Submitted, Final Bid Submitted, Contract Signed, Funded (Closed Won) or Contract Negotiation only if both ‘KYC’ and ‘AML’ checkboxes on Account are checked.</description>
    <errorConditionFormula>IF( Account.KYC__c == True &amp;&amp; Account.AML__c ==True, 
	FALSE, 
	IF((ISPICKVAL(StageName, &#39;Final Bid Submitted&#39;) || ISPICKVAL(StageName, &#39;Contract Signed&#39;) || ISPICKVAL(StageName, &#39;Initial Bid Submitted&#39;) || ISPICKVAL(StageName, &#39;Funded&#39;) || ISPICKVAL(StageName, &#39;Contract Negotiation&#39;)) &amp;&amp; RecordType.Name == &#39;BAC Overview&#39;, 
		TRUE, 
		FALSE))</errorConditionFormula>
    <errorMessage>Please perform the AML and KYC checks for this Account to proceed further with this Opportunity.</errorMessage>
</ValidationRule>
