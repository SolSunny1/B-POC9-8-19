<apex:page controller="AccountSummaryReportControllerByAccounts"  action="{!loadKeyAccounts}">

       
    
        <style>
       
            
            
            table.list a{color: blue !important; } 
            
             body .bPageBlock .pbBody .grey .pbSubheader{
                background-color:#c0c0c0;
            }
            body .bPageBlock .pbBody .grey .pbSubheader h3{
                color:#000;
           
                }
        </style>
    <apex:sectionHeader title="Property Enquiries by Key Accounts Report as of : {!TODAY()}"  description="This report shows Property Enquiries modified in the last 31 days"/>
    <apex:form >
        <apex:pageBlock >
            <apex:pageBlockButtons >
                <apex:commandButton action="{!renderAsPdf}" value="Save as Pdf"/>
            </apex:pageBlockButtons>
            <apex:repeat value="{!objectMap }" var="ProgNameKey" >
                <apex:pageBlock title="{!ProgNameKey}" id="c">
                    
                            <apex:pageBlockSection columns="1" >
                                <apex:pageBlockTable value="{!objectMap [ProgNameKey]}" var="lstGrnRate"  border="1" columnsWidth="10%,10%,5%,65%,10%">
                                    
                                                                     
                                    <apex:column value="{!lstGrnRate.Location__c}" headerValue="IDIG Region" />
                                    <apex:column value="{!lstGrnRate.Property__c}" style="font-weight: bold;"  />                    
                                  
                                 <apex:column footerClass="reviewStatusHeader" HeaderValue="Status" headerClass="ct">
                                       <apex:image value="{! If(lstGrnRate.Status__c=="Red" ,URLFOR($Resource.RedFlag),
                                                      If(lstGrnRate.Status__c=="Green",URLFOR($Resource.GreenFlag), URLFOR($Resource.AmberFlag))) }" width="60" height="40" />
                                 </apex:column>
           
                                 <apex:column value="{!lstGrnRate.Account_Summary__c}" /> 
                                 <apex:column headerValue="Date of Update" value="{!lstGrnRate.lastModifiedDate}" />   
                                    
                                    
                                </apex:pageBlockTable>
                            </apex:pageBlocksection>
                        
                </apex:pageBlock>
            </apex:repeat>
        </apex:pageBlock>
    </apex:form> 
</apex:page>